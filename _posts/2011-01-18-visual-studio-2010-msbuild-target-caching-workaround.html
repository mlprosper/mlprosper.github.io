---
layout: post
title: Visual Studio 2010 msbuild target caching workaround
tags:
- Programming
status: publish
type: post
published: true
meta:
  posterous_63e880bf12009207a8992a53b1c27d6a_post_id: '40258138'
  posterous_63e880bf12009207a8992a53b1c27d6a_permalink: http://mprosper.posterous.com/visual-studio-2010-msbuild-target-caching-wor
  _edit_last: '19924537'
comments: true
---
<p>Recently I created a custom msbuild .target file for one of my Visual  Studio 2010 projects.  The .target file was being imported into the  project file like so:<br /> <code> </code></p> <div id=":3s"><div><div><em>&lt;Import Project="BuildScripts\MyModules.Targets" /&gt;</em></div> <div><em><br /> </em></div> <div>Using the internal "Build" command worked perfectly. The msbuild commands in the project and .target file ran flawlessly.</div> <div><a href="http://mlprosper.files.wordpress.com/2011/01/greenshot_2011-01-18_14-16-59.png"><img class="alignnone size-full wp-image-41" title="greenshot_2011-01-18_14-16-59" src="http://mlprosper.files.wordpress.com/2011/01/greenshot_2011-01-18_14-16-59.png" alt="" width="234" height="206" /></a></div> <p>That is, until I tried to make changes to the .target file.</p> <p>For  some reason, Visual Studio would not run the updated version of the  target file contained in the project.  It seemed like the target file  was somehow cached when Visual Studio opened and would not replace it  with the version I was editing in the window.  After much searching, I  stumbled across this article on <a href="http://stackoverflow.com/" target="_blank">stackoverflow.com</a>:</p> <p><a href="http://stackoverflow.com/questions/2903803/how-can-i-prevent-external-msbuild-files-from-being-cached-by-visual-studio-dur" target="_blank">http://stackoverflow.com/questions/2903803/how-can-i-prevent-external-msbuild-files-from-being-cached-by-visual-studio-dur</a></p> <p>Apparently VS likes to cache the target files and not let go until  you startup and shutdown.  Thus far I haven't found a way to override  this behavior, so I put a workaround in place so I could edit the  .target file with impunity.</p> <p>I added a custom External Tool to VS by going to Tools --&gt;  External Tools.  I clicked Add and entered the following information:</p> <p><a href="http://mlprosper.files.wordpress.com/2011/01/greenshot_2011-01-18_13-51-32.png"><img class="alignnone size-medium wp-image-45" title="greenshot_2011-01-18_13-51-32" src="http://mlprosper.files.wordpress.com/2011/01/greenshot_2011-01-18_13-51-32.png?w=300" alt="" width="300" height="292" /></a></p> <p><strong>Command: C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe</strong><br /> (I have the .Net Framework 4.0 installed on my machine - this path may be different depending on your .Net Framework version)</p> <p><strong>Arguments: $(ProjectDir)\$(ProjectFileName) /target:Build /property:Configuration=Release /verbosity:d<br /> </strong>(These arguments will start the "Build" target in the project file  and set the Configuration parameter to "Release" as well as the  verbosity of logging to "Detailed)</p> <p><strong>Use Output window<br /> </strong>This will place the results of the msbuild command into the VS output window</p> <p>After creating this External Tool, the new command will appear in the Tools menu:</p> <p><img title="greenshot_2011-01-18_14-19-55.png" src="https://mail.google.com/mail/?ui=2&amp;ik=a0bd99a7b5&amp;view=att&amp;th=12d9b38553664aa6&amp;attid=0.1&amp;disp=emb&amp;realattid=ii_12d9b379595a19d0&amp;zw" alt="greenshot_2011-01-18_14-19-55.png" /></p> <p>Now I can build the project file as well as the associated .target file without having to worry about VS caching anything.</p></div></div>
